<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>สร้างรูปเรารักในหลวง</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
    <link rel="stylesheet" href="fonts/fonts.css">
    <link rel="stylesheet" href="styles.css"> </head>

<body>
    <!-- Always shows a header, even in smaller screens. -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title --><span class="mdl-layout-title font-title" style="font-size:2.2em"><i class="material-icons">favorite</i> สร้างรูปเรารักในหลวง</span> </div>
        </header>
        <main class="mdl-layout__content">
            <div class="page-content">
                <div class="mdl-grid">
                    <div class="mdl-cell mdl-cell--6-col">
                        <canvas id="canvas" width=600 height=600 style="float:right"></canvas>
                    </div>
                    <div class="mdl-cell mdl-cell--6-col">
                        <h1 class="font-title">กรอกชื่อของคุณ</h1>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="username" value="เอิร์ธ">
                            <label class="mdl-textfield__label" for="username">ชื่อของคุณ</label>
                        </div>
                        <br>
                        <div class="mdl-textfield mdl-js-textfield" style="width:300px;">
                            <label for="offset">ปรับตำแหน่ง</label>
                            <input id="offset" class="mdl-slider mdl-js-slider" type="range" min="0" max="200" value="100" tabindex="0">
                        </div>
                        
                        <div class="text-right" style="width:300px;">
                            <a href="#" id="download" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored"><i class="material-icons" style="top:0">file_download</i> ดาวน์โหลด</a>
                        </div>
                        
                        <hr style="width:300px;">
                        
                        <p>
                            ขอพระองค์ ทรงพระเจริญ
                            <br>
                            ด้วยเกล้าด้วยกระหม่อม ขอเดชะ
                            
                        </p>
                        
                        <small>
                            - ขอขอบคุณ <a href="https://www.facebook.com/kulthida.rotchanawit/media_set?set=a.10153936040086444.1073741907.628211443&type=3" target="_blank">Kulthida Kul</a> ผู้ออกแบบและผู้ปลุกกระแส <br>
                            - ขอบคุณฟอนต์น่ารักๆ <a href="http://www.f0nt.com/release/5011_the_little_uki_noworry/" target="_blank">5011_the_little_uki_noworry</a><br>
                            - Source Code อยู่ที่ <a href="https://github.com/earthchie/we_love_the_king_generator/" target="_blank">Github</a> ภายใต้ลิขสิทธิ์ <a href="http://www.wtfpl.net/about/" target="_blank"> WTFPL 2.0</a>
                            
                        </small>
                        
                        
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
    <script>
        
        var username = document.getElementById('username'),
            offset = document.getElementById('offset'),
            canvas = document.getElementById('canvas'),
            context = canvas.getContext('2d'),
            render = function(username){
                
                var img = new Image();

                img.onload = function () {
                    context.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);

                    context.font = 'normal 70px noworry';
                    context.fillStyle = '#fff';

                    context.fillText(username, +offset.value, 310);
                    context.fillText('ในหลวง', 400, 310);

                };

                img.src = 'bg.png';
            }
        ;
        
        render(username.value);
        
        username.onkeyup = function(){
            render(this.value);
        }
        username.onchange = function(){
            render(this.value);
        }
        offset.onchange = function(){
            render(username.value);
        }
        
        document.getElementById('download').onclick = function(e) {
            
            this.href = canvas.toDataURL();
            this.download = 'We_Love_the_King.png';
            
        };
    </script>
</body>

</html>